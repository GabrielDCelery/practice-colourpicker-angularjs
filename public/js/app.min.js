console.log("app is running...");var colourPickerApp=angular.module("ColourPickerApp",["ApiFactory","PaletteFactory","ObjectManipulatorFactory","PaletteCtrl"]),PaletteCtrl=angular.module("PaletteCtrl",[]);PaletteCtrl.controller("PaletteCtrl",["$scope","ApiFactory","PaletteFactory","ObjectManipulatorFactory",function(t,e,r,a){function n(e,r){t.selectedColourIndex=r,t.slider={name:e[r].name,rgb:[e[r].rgb[0],e[r].rgb[1],e[r].rgb[2]],opacity:e[r].opacity},t.palette=a.setKeyToTrue(t.palette,"selected",t.selectedColourIndex)}function o(e){e.rgb=a.arrayStringElementsToIntegers(e.rgb),t.palette=r.editPalette(t.palette,t.selectedColourIndex,e)}function l(){var e=angular.copy(t.palette[t.selectedColourIndex]);e.name="New"+e.name,t.palette.unshift(e),n(t.palette,0),document.body.scrollTop=0}function c(){t.palette.length>1&&(t.palette.splice(t.selectedColourIndex,1),n(t.palette,0))}function u(a){e.getPalette(a,function(e){t.palette=r.createPalette(e),n(t.palette,0)})}function i(){var e=JSON.stringify(r.createExportable(t.palette));console.log(e)}console.log("palette controller is running..."),t.palette=[],t.slider={name:"",rgb:[0,0,0],opacity:0},t.selectedColourIndex=0,t.selectColour=n,t.editColour=o,t.duplicateColour=l,t.getPalette=u,t.savePalette=i,t.deleteColour=c,u(1)}]);var ApiFactory=angular.module("ApiFactory",[]);ApiFactory.factory("ApiFactory",["$http",function(t){function e(e,r){t.get("https://qbs.arkonline.co.uk/task/colours.json?task="+e).success(r)}return{getPalette:e}}]);var ObjectManipulatorFactory=angular.module("ObjectManipulatorFactory",[]);ObjectManipulatorFactory.factory("ObjectManipulatorFactory",[function(){function t(t,e,r){for(var a=0;a<t.length;a++)a==r?t[a][e]=!0:t[a][e]=!1;return t}function e(t){for(var e=0;e<t.length;e++)t[e]=parseInt(t[e]);return t}return{setKeyToTrue:t,arrayStringElementsToIntegers:e}}]);var PaletteFactory=angular.module("PaletteFactory",[]);PaletteFactory.factory("PaletteFactory",[function(){function t(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function e(e){return"#"+t(e[0])+t(e[1])+t(e[2])}function r(t,e){for(var r=[],a=0;3>a;a++){var n=t[a]+e[a];0>n&&(n=0),n>255&&(n=255),r[a]=n}return r}function a(t){for(var a=[],n=0;n<t.length;n++){var o={};o.name=t[n].name,o.rgb=t[n].baseColour,o.hex=e(t[n].baseColour),o.opacity=1,o.tints=[],o.selected=!1;for(var l=0;l<t[n].tints.length;l++){var c={};c.rgb=r(t[n].baseColour,t[n].tints[l]),c.hex=e(c.rgb),c.tint=t[n].tints[l],o.tints.push(c)}a.push(o)}return a}function n(t,a,n){t[a].name=n.name,t[a].rgb=n.rgb,t[a].hex=e(n.rgb),t[a].opacity=n.opacity;for(var o=(t[a].tints,0);o<t[a].tints.length;o++){var l=r(t[a].rgb,t[a].tints[o].tint);t[a].tints[o].rgb=l,t[a].tints[o].hex=e(l)}return t}function o(t){for(var e=[],r=0;r<t.length;r++){var a={};a.name=t[r].name,a.baseColour=t[r].rgb,a.tints=[];for(var n=0;n<t[r].tints.length;n++)a.tints.push(t[r].tints[n].tint);e.push(a)}return e}return{createPalette:a,createExportable:o,editPalette:n}}]);