console.log("app is running...");var colourPickerApp=angular.module("ColourPickerApp",["ApiFactory","PaletteFactory","ObjectManipulatorFactory","PaletteCtrl"]),PaletteCtrl=angular.module("PaletteCtrl",[]);PaletteCtrl.controller("PaletteCtrl",["$scope","ApiFactory","PaletteFactory","ObjectManipulatorFactory",function(t,e,a,r){function l(e,a,l){t.selectedPaletteElement=l,t.slider={rgb:[e[0],e[1],e[2]],opacity:a},t.palette=r.setKeyToTrue(t.palette,"selected",t.selectedPaletteElement)}function n(e){t.palette=angular.copy(a.editPalette(t.palette,t.defaultPalette,e,t.selectedPaletteElement))}function o(e){t.palette[t.selectedPaletteElement].opacity=e}function c(){var e=angular.copy(t.palette[t.selectedPaletteElement]);t.palette.unshift(e),t.selectedPaletteElement=0,t.palette=r.setKeyToTrue(t.palette,"selected",t.selectedPaletteElement)}function u(){t.palette.length>1&&(t.palette.splice(t.selectedPaletteElement,1),t.selectedPaletteElement=0,t.palette=r.setKeyToTrue(t.palette,"selected",0))}function i(r){e.getPalette(r,function(e){t.defaultPalette=e,t.palette=a.createPalette(e),l(t.palette[0].rgb,t.palette[0].opacity,0)})}function s(){var e=JSON.stringify(a.createExportable(t.palette));console.log(e)}console.log("palette controller is running..."),t.defaultPalette=[],t.palette=[],t.slider={rgb:[0,0,0],opacity:0},t.selectedPaletteElement=0,t.setSliders=l,t.modifyColour=n,t.modifyOpacity=o,t.duplicateColour=c,t.getPalette=i,t.savePalette=s,t.deleteColour=u,i(1)}]);var ApiFactory=angular.module("ApiFactory",[]);ApiFactory.factory("ApiFactory",["$http",function(t){function e(e,a){t.get("https://qbs.arkonline.co.uk/task/colours.json?task="+e).success(a)}return{getPalette:e}}]);var ObjectManipulatorFactory=angular.module("ObjectManipulatorFactory",[]);ObjectManipulatorFactory.factory("ObjectManipulatorFactory",[function(){function t(t,e,a){for(var r=0;r<t.length;r++)r==a?t[r][e]=!0:t[r][e]=!1;return t}function e(t){for(var e=0;e<t.length;e++)t[e]=parseInt(t[e]);return t}return{setKeyToTrue:t,arrayStringElementsToInteger:e}}]);var PaletteFactory=angular.module("PaletteFactory",[]);PaletteFactory.factory("PaletteFactory",["ObjectManipulatorFactory",function(t){function e(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function a(t){return"#"+e(t[0])+e(t[1])+e(t[2])}function r(t,e){for(var a=[],r=0;3>r;r++){var l=t[r]+e[r];0>l&&(l=0),l>255&&(l=255),a[r]=l}return a}function l(t){for(var e=[],l=0;l<t.length;l++){var n={};n.name=t[l].name,n.rgb=t[l].baseColour,n.hex=a(t[l].baseColour),n.opacity=1,n.tints=[],n.selected=!1;for(var o=0;o<t[l].tints.length;o++){var c={};c.rgb=r(t[l].baseColour,t[l].tints[o]),c.hex=a(c.rgb),n.tints.push(c)}e.push(n)}return e}function n(e,l,n,o){n=t.arrayStringElementsToInteger(n),e[o].hex=a(n),e[o].rgb=n;for(var c=l[o].tints,u=0;u<c.length;u++){var i=r(e[o].rgb,c[u]);e[o].tints[u].hex=a(i),e[o].tints[u].rgb=i}return e}function o(t){for(var e=[],a=0;a<t.length;a++){var r={};r.name=t[a].name,r.baseColour=t[a].rgb,r.tints=[];for(var l=0;l<t[a].tints.length;l++){for(var n=[],o=0;3>o;o++)n.push(t[a].tints[l].rgb[o]-t[a].rgb[o]);r.tints.push(n)}e.push(r)}return e}return{createPalette:l,createExportable:o,editPalette:n}}]);